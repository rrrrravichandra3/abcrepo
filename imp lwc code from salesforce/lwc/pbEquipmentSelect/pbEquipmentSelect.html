<template>
    <div>
        <div class="container1">
          <div class="main">
            <template lwc:if={isLoading}>
              <div class="spinner">
                <lightning-spinner variant="brand" alternative-text="Loading" size="small"></lightning-spinner>
              </div>
            </template>
            <template lwc:else>
              <div class="submain">
                  <div class="heading"> 
                      <p>{_heading}</p>
                  </div>
                  <div class="subheading">
                      <h6 type-style="display-6">{_subHeading}</h6>
                  </div>
                  <div class="picker">
                      <template lwc:if={_subtasks.mobile.active}>
                          <c-pb-custom-visual-picker-group onselect={handleMobileSelect} items={_mobiledata}></c-pb-custom-visual-picker-group>
                      </template>
                      <template lwc:if={_subtasks.laptop.active}>
                          <c-pb-custom-visual-picker-group onselect={handleLaptopSelect} items={_laptopdata}></c-pb-custom-visual-picker-group>
                      </template>
                      <template lwc:if={_subtasks.review.active}>
                        <div class="reviewNote">
                          <div class="noteIcon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 27 27" fill="none">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5001 1.03845C6.59434 1.03845 1.03857 6.59422 1.03857 13.5C1.03857 20.4058 6.59434 25.9615 13.5001 25.9615C20.4059 25.9615 25.9617 20.4058 25.9617 13.5C25.9617 6.59422 20.4059 1.03845 13.5001 1.03845ZM13.5002 22.8462C8.30784 22.8462 4.154 18.6923 4.154 13.5C4.154 8.30772 8.30784 4.15387 13.5002 4.15387C18.6925 4.15387 22.8463 8.30772 22.8463 13.5C22.8463 18.6923 18.6925 22.8462 13.5002 22.8462ZM13.5004 7.32118C14.3831 7.32118 15.0581 7.99618 15.0581 8.87887C15.0581 9.76157 14.3831 10.4366 13.5004 10.4366C12.6177 10.4366 11.9427 9.76157 11.9427 8.87887C11.9427 7.99618 12.6177 7.32118 13.5004 7.32118ZM16.0963 18.225C16.0963 18.4846 15.8886 18.6923 15.5771 18.6923H11.4233C11.1636 18.6923 10.904 18.5365 10.904 18.225V17.1865C10.904 16.9269 11.1117 16.6154 11.4233 16.6154C11.6829 16.6154 11.9425 16.4596 11.9425 16.1481V14.0712C11.9425 13.8115 11.7348 13.5 11.4233 13.5C11.1636 13.5 10.904 13.3442 10.904 13.0327V11.9942C10.904 11.7346 11.1117 11.4231 11.4233 11.4231H14.5386C14.7983 11.4231 15.0579 11.6827 15.0579 11.9942V16.1481C15.0579 16.4077 15.2656 16.6154 15.5771 16.6154C15.8367 16.6154 16.0963 16.875 16.0963 17.1865V18.225Z" fill="#747474"/>
                            </svg>
                          </div>
                          <div class="noteHeading">Please Note</div>
                          <div class="noteText">Once your choices are confirmed, they can only be changed by logging a ticket. If you need to do that, please speak with your manager.</div>
                        </div>
                        <div class="review">
                          <div class="choosenMobile">
                            <div class="choosenMobileImg">
                              <img src={_selectedMobile.Static_Resource_image_URL__c} alt="mobile phone"/>
                            </div>
                            <h6 type-style="display-7">{_selectedMobile.Name}</h6>
                          </div>
                          <div class="vl"></div>
                          <div class="choosenLaptop">
                            <img src={_selectedLaptop.Static_Resource_image_URL__c} alt="Laptoo"/>
                            <h6 type-style="display-7">{_selectedLaptop.Name}</h6>
                          </div>
                        </div>
                      </template>
                      <template lwc:if={_subtasks.address.active}>
                        <div class="businessSiteNote">
                          <p type-style="caption">Your Equipment would be delivered to "{_shippingAddress}" Business Site</p>
                        </div>
                        <div class="address">
                          <h6 type-style="display-7">Package Receiver</h6>
                          <div>
                            <wes-text-input lwc:external validation-text="Required" value={_shippingName}>
                              Name of the Receiver
                              <div slot="help-text">In case you are not the one receiving the package</div>
                            </wes-text-input>
                          </div>
                          <h6 class="addressItem" type-style="display-7">Delivery Address</h6>
                          <div>
                            <wes-text-input lwc:external validation-text="Required" value={_shippingCountry}>
                              Country
                            </wes-text-input>
                          </div>
                          <div class="addressItem">
                          <wes-text-input lwc:external validation-text="Required" value={_shippingCity}>
                            City
                          </wes-text-input>
                          </div>
                          <div class="addressItem">
                          <wes-text-input lwc:external validation-text="Required" value={_shippingStreet}>
                            Street
                          </wes-text-input>
                          </div>
                          <div class="addressItem">
                          <wes-text-input lwc:external validation-text="Required" value={_shippingState}>
                            State/Province
                          </wes-text-input>
                          </div>
                          <div class="addressItem">
                          <wes-text-input lwc:external validation-text="Required" value={_shippingZipCode}>
                            Zipcode
                          </wes-text-input>
                          </div>
                          <div class="addressItem">
                            <wes-text-input lwc:external validation-text="Required" value={_shippingEmail}>
                              Email
                            </wes-text-input>
                          </div>
                          <div class="addressItem">
                            <wes-text-input lwc:external validation-text="Required" value={_shippingPhone}>
                              Phone
                            </wes-text-input>
                          </div>
                        </div>
                     </template>
                    <template lwc:if={_subtasks.confirm.active}>
                      <div class="confirm">
                        <div class="confirmNote">
                          Please wait from 8-12 days for them to arrive at your address.
                          You will receive an email with the tracking code at {_shippingEmail}
                        </div>
                        <div class="confirmContainer">
                          <div class="confirmEquipment">
                            <div class="confirmImageContainer">
                              <img class="confirmImages" src={_selectedMobile.Static_Resource_image_URL__c} alt="mobile phone"/>
                              <img class="confirmImages2" src={_selectedLaptop.Static_Resource_image_URL__c} alt="mobile phone"/>
                            </div>
                            <div class="confirmAddress">
                              <div>
                                <svg class="miniIcon" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                                  <path d="M23.8225 11.3846L21.01 8.56725C20.8755 8.43401 20.6945 8.35817 20.5052 8.35571H17.5485C17.3572 8.35571 17.1738 8.43169 17.0385 8.56693C16.9033 8.70218 16.8273 8.8856 16.8273 9.07687V14.8461C16.829 14.9027 16.8442 14.958 16.8716 15.0075C16.899 15.057 16.9379 15.0993 16.9849 15.1308C17.0319 15.1622 17.0857 15.1821 17.1419 15.1886C17.1981 15.1951 17.2551 15.1881 17.3081 15.1682C17.8338 14.9509 18.3979 14.8414 18.9667 14.8461C19.7399 14.8485 20.4984 15.0569 21.1643 15.4499C21.8301 15.8428 22.3793 16.406 22.7552 17.0817C22.7813 17.1265 22.8167 17.1653 22.859 17.1954C22.9013 17.2256 22.9495 17.2463 23.0005 17.2563C23.0514 17.2663 23.1039 17.2654 23.1545 17.2535C23.205 17.2416 23.2525 17.2191 23.2936 17.1874C23.524 16.9843 23.7093 16.7352 23.8376 16.4562C23.9659 16.1771 24.0345 15.8743 24.0388 15.5673V11.8846C24.0382 11.791 24.0187 11.6985 23.9815 11.6126C23.9444 11.5266 23.8903 11.4491 23.8225 11.3846Z" fill="#032D60"/>
                                  <path d="M18.9908 21.3365C20.1856 21.3365 21.1542 20.3679 21.1542 19.173C21.1542 17.9782 20.1856 17.0096 18.9908 17.0096C17.7959 17.0096 16.8273 17.9782 16.8273 19.173C16.8273 20.3679 17.7959 21.3365 18.9908 21.3365Z" fill="#032D60"/>
                                  <path d="M13.9427 5.10571H1.68307C1.49181 5.10571 1.30838 5.18169 1.17314 5.31693C1.03789 5.45218 0.961914 5.6356 0.961914 5.82687V15.5673C0.963229 15.8726 1.02802 16.1742 1.15217 16.4532C1.27631 16.7321 1.45711 16.9821 1.68307 17.1874C1.72289 17.2225 1.77023 17.2479 1.82143 17.2617C1.87262 17.2755 1.92631 17.2774 1.97834 17.2671C2.03037 17.2569 2.07936 17.2349 2.12153 17.2027C2.16369 17.1706 2.19791 17.1291 2.22153 17.0817C2.61473 16.3676 3.20166 15.7791 3.91471 15.384C4.62776 14.9889 5.43791 14.8033 6.25185 14.8485C7.06578 14.8937 7.85039 15.1679 8.51528 15.6396C9.18017 16.1112 9.69831 16.7611 10.01 17.5144C10.0373 17.5785 10.0828 17.6332 10.141 17.6716C10.1991 17.7101 10.2672 17.7306 10.3369 17.7307H12.5004C13.0734 17.7282 13.6222 17.4994 14.0274 17.0943C14.4326 16.6891 14.6613 16.1403 14.6638 15.5673V5.82687C14.6626 5.63599 14.5862 5.4533 14.4512 5.31833C14.3163 5.18336 14.1336 5.10697 13.9427 5.10571Z" fill="#032D60"/>
                                  <path d="M6.00999 21.3365C7.20484 21.3365 8.17345 20.3679 8.17345 19.173C8.17345 17.9782 7.20484 17.0096 6.00999 17.0096C4.81514 17.0096 3.84653 17.9782 3.84653 19.173C3.84653 20.3679 4.81514 21.3365 6.00999 21.3365Z" fill="#032D60"/>
                                </svg> Arriving in 8-10 days
                              </div>
                              <div>
                                <svg class="miniIcon" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                                  <path fill-rule="evenodd" clip-rule="evenodd" d="M23.4619 4.5673L16.5388 1.10576C16.2023 0.961533 15.8177 0.961533 15.5292 1.10576L9.13499 4.32692L2.69268 1.10576C2.30807 0.913456 1.8273 0.913456 1.49076 1.15384C1.15422 1.34615 0.961914 1.73076 0.961914 2.11538V19.4231C0.961914 19.8558 1.2023 20.2404 1.58691 20.4327L8.50999 23.8942C8.84653 24.0385 9.23114 24.0385 9.51961 23.8942L15.9619 20.6731L22.3561 23.8942C22.5004 23.9904 22.6927 24.0385 22.885 24.0385C23.0773 24.0385 23.3177 23.9904 23.51 23.8461C23.8465 23.6538 24.0388 23.2692 24.0388 22.8846V5.57692C24.0388 5.14423 23.8465 4.75961 23.4619 4.5673ZM21.6352 6.77854V15.9132C21.6352 16.442 21.1545 16.8266 20.6737 16.6343C18.8949 15.9612 20.3372 12.9805 19.0391 11.3458C17.8372 9.85546 16.2987 11.3939 14.8083 9.03815C13.4141 6.77854 15.2891 5.14392 17.0199 4.27854C17.2602 4.18238 17.5006 4.18238 17.6929 4.27854L21.2506 6.05738C21.5391 6.20161 21.6352 6.49008 21.6352 6.77854ZM11.9716 20.144C11.6831 20.2882 11.3466 20.2401 11.1062 20.0478C10.6254 19.6151 10.2408 18.942 10.2408 18.269C10.2408 17.1151 8.31773 17.4997 8.31773 15.192C8.31773 13.317 6.10619 12.8363 4.23119 13.0286C3.75042 13.0767 3.41388 12.7401 3.41388 12.2593V5.24012C3.41388 4.66319 3.99081 4.27858 4.47158 4.56704L8.60619 6.63435C8.65427 6.63435 8.70235 6.68243 8.70235 6.68243L8.84658 6.77858C10.5773 7.78819 10.2408 8.6055 9.51965 9.8555C8.70235 11.2497 8.36581 9.8555 7.21196 9.47089C6.05811 9.08627 4.90427 9.8555 5.28888 10.6247C5.6735 11.394 6.82734 10.6247 7.59658 11.394C8.36581 12.1632 8.36581 13.317 10.6735 12.5478C12.9812 11.7786 13.3658 12.1632 14.135 12.9324C14.9043 13.7017 15.2889 15.2401 14.135 16.394C13.462 17.067 13.1735 18.5093 12.885 19.4709C12.837 19.6632 12.6927 19.8555 12.5004 19.9517L11.9716 20.144Z" fill="#032D60"/>
                                </svg> Deliver to: {_shippingStreet}, {_shippingCity}, {_shippingState}, {_shippingZipCode}, {_shippingCountry}
                              </div>
                            </div>
                          </div>
                          <div class="astroLogo">
                            <img alt="astro logo" src={_astroImgSrc}/>
                          </div>
                        </div>
                      </div>
                    </template>
                  </div>
              </div>
              </template>
          </div>
          <template lwc:if={_isLastSubPage}>
              <div class="finishBtns">
                <div class="finishBtn">
                  <lightning-button variant="brand" label = "Next Steps: Workday Tasks ->"  disabled = {disableButton} onclick={handleNext}>
                  </lightning-button>
              </div>
                <p type-style="body-1"><a href="#" onclick={handleBack}>{_backBtnLabel}</a></p>
              </div>
          </template>
          <template lwc:else>
            <div class="nav">
              <div class="button">
                      <lightning-button label={_backBtnLabel} onclick={handleBack}>
                      </lightning-button>
              </div>
              <div class="navbar">
                  <div class="slds-progress">
                      <ol class="slds-progress__list">
                        <li class="slds-progress__item slds-is-active">
                          <button class="slds-button slds-progress__marker">
                            <template lwc:if = {_subtasks.mobile.complete}>
                              <div class="checked">
                                <wes-icon lwc:external symbol="check"></wes-icon>
                              </div>                                  
                            </template>
                            <span class="slds-assistive-text">Step 1</span>
                          </button>
                        </li>
                        <li class="slds-progress__item">
                          <button class="slds-button slds-progress__marker">
                            <template lwc:if = {_subtasks.laptop.complete}>
                              <div class="checked">
                                <wes-icon lwc:external symbol="check"></wes-icon>
                              </div>                                  </template>
                            <span class="slds-assistive-text">Step 2 </span>
                          </button>
                        </li>
                        <li class="slds-progress__item">
                          <button class="slds-button slds-progress__marker">
                            <template lwc:if = {_subtasks.review.complete}>
                              <div class="checked">
                                <wes-icon lwc:external symbol="check"></wes-icon>
                              </div>                                  </template>
                            <span class="slds-assistive-text">Step 3 </span>
                          </button>
                        </li> 
                        <li class="slds-progress__item">
                          <button class="slds-button slds-progress__marker">
                            <template lwc:if = {_subtasks.address.complete}>
                              <div class="checked">
                                <wes-icon lwc:external symbol="check"></wes-icon>
                              </div>                                  </template>
                            <span class="slds-assistive-text">Step 4 </span>
                          </button>
                        </li>
                      </ol>
                      <div class="slds-progress-bar slds-progress-bar_x-small" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" aria-label="Progress bar" role="progressbar">
                        <span class="slds-progress-bar__value" style="width:0%">
                          <span class="slds-assistive-text">Progress: 50%</span>
                        </span>
                      </div>
                    </div>
              </div>
              <div class="button2">
                  <lightning-button variant="brand" label = "Confirm Selection"  disabled = {disableButton} onclick={handleNext}>
                  </lightning-button>
              </div>
          </div>
          </template>
      </div>
    </div>
</template>